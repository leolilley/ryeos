# rye:signed:2026-02-23T00:43:13Z:59542de50142e08e2aec3ed916025232774feaccce11b0c8041f15d2c8e6cfc9:uG6sig9FRe96JZtld46P77dKQM6U2akEmcFzO8TSzZ4XuABOJkuZymmZC1ubfgxB1iO2DODIKVS60rJRsWxWDA==:9fbfabe975fa5a7f
version: "1.0.0"
tool_type: runtime
executor_id: rye/core/primitives/subprocess
category: rye/core/runtimes/state-graph
description: "State graph runtime â€” walks graph YAML tools, dispatching rye_execute for each node"

env_config:
  interpreter:
    type: local_binary
    binary: python
    candidates: [python3]
    search_paths: [".venv/bin", ".venv/Scripts"]
    var: RYE_PYTHON
    fallback: python3
  env:
    PYTHONUNBUFFERED: "1"
    PROJECT_VENV_PYTHON: "${RYE_PYTHON}"

anchor:
  enabled: true
  mode: always
  root: tool_dir
  lib: ../python/lib
  env_paths:
    PYTHONPATH:
      prepend: ["{anchor_path}", "{runtime_lib}"]

verify_deps:
  enabled: true
  scope: anchor
  recursive: true
  extensions: [".py", ".yaml", ".yml", ".json"]
  exclude_dirs: ["__pycache__", ".venv", "node_modules", ".git", "config"]

config:
  command: "${RYE_PYTHON}"
  args:
    - "-c"
    - |
      import sys,os,json,importlib.util
      anchor=sys.argv[4]
      walker=os.path.join(anchor,"walker.py")
      if not os.path.isfile(walker):
          sys.exit("walker not found: "+walker)
      spec=importlib.util.spec_from_file_location("walker",walker)
      mod=importlib.util.module_from_spec(spec)
      spec.loader.exec_module(mod)
      graph=mod._load_graph_yaml(sys.argv[1])
      r=mod.run_sync(graph,json.loads(sys.argv[2]),sys.argv[3])
      print(json.dumps(r,default=str))
    - "{tool_path}"
    - "{params_json}"
    - "{project_path}"
    - "{anchor_path}"
  timeout: 600
