# config/coordination.yaml
schema_version: "1.0.0"

coordination:
  # Wait configuration
  wait_threads:
    default_timeout: 600
    max_timeout: 3600

  # Context limit, continuation, and resume
  continuation:
    trigger_threshold: 0.9
    # Thread summary directive â€” spawned to summarize prior conversation on resume
    summary_directive: "rye/agent/threads/thread_summary"
    summary_model: "fast"
    summary_limit_overrides:
      turns: 3
      spend: 0.02
    # Hard ceiling: summary + trailing turns must fit under this (tokens)
    resume_ceiling_tokens: 16000
    # Soft target for summary output
    summary_max_tokens: 4000

  # Transcript integrity verification on resume/handoff
  # "strict" (default): refuse on any integrity failure
  # "lenient": allow unsigned trailing events with warning
  transcript_integrity: strict

  # Orphan detection
  orphan_detection:
    enabled: true
    scan_on_startup: true
    stale_threshold_minutes: 60
